@model List<Employee_Management_System.Models.EmployeeModel>

@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="card">
    <div class="card-header bg-success text-white text-uppercase">
        <h4>Employee List</h4>
    </div>
</div>


<div class="container mt-4">
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Full Name</th>
                <th>Designation</th>
                <th>Department</th>
                <th>Joining Date</th>
                <th>Reporting Person</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var employee in Model)
            {
                <tr>
                    <td>@($"{employee.FirstName} {employee.LastName}")</td>
                    <td>@employee.DesignationName</td>
                    <td>@employee.DepartmentName</td>
                    <td>@employee.JoiningDate.ToShortDateString()</td>
                    <td>@employee.ReportingPersonName</td>
                    <td>
                        <a href="@Url.Action("AddEmployee", "Employee", new { id = employee.EmployeeID })" class="btn btn-primary ">Edit</a>
                        <a href="#" class="btn btn-danger delete-employee" data-employee-id="@employee.EmployeeID">Delete</a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
<script>
    document.addEventListener('click', function (e) {
        if (e.target.matches('.delete-employee')) {
            e.preventDefault();
            var employeeId = e.target.getAttribute('data-employee-id');
            if (confirm("Are you sure you want to delete this employee?")) {
                window.location.href = '@Url.Action("DeleteEmp", "Employee")/' + employeeId;
            }
        }
    });

</script>

@if (TempData["msg"] != null)
{
    <script>
        alert('@TempData["msg"].ToString();');
    </script>
}